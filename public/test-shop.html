<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Shop Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4">Simple Shop Test</h1>
        
        <div id="loading-state" class="flex justify-center items-center py-16">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                <p class="text-gray-600">Loading products...</p>
            </div>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 hidden" id="products-grid">
            <!-- Products will be dynamically inserted here -->
        </div>
        
        <div id="status" class="mt-4 p-4 bg-gray-100"></div>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        
        function log(message) {
            console.log(message);
            statusDiv.innerHTML += '<div>' + message + '</div>';
        }
        
        log('Starting test...');
        
        // Test API directly
        fetch('/api/products?limit=5')
            .then(response => {
                log('API Response status: ' + response.status);
                return response.json();
            })
            .then(data => {
                log('API Response: ' + JSON.stringify(data, null, 2));
                
                if (data.status === 'success') {
                    log('Found ' + data.data.products.length + ' products');
                    
                    // Hide loading and show products
                    const loading = document.getElementById('loading-state');
                    const grid = document.getElementById('products-grid');
                    
                    if (loading) {
                        loading.style.display = 'none';
                        log('Loading hidden');
                    }
                    
                    if (grid) {
                        grid.classList.remove('hidden');
                        
                        // Create simple product cards
                        grid.innerHTML = data.data.products.map(product => `
                            <div class="bg-white p-4 rounded shadow">
                                <h3 class="font-bold">${product.name}</h3>
                                <p class="text-gray-600">${product.category}</p>
                                <p class="text-blue-600 font-bold">${product.price} ${product.currency}</p>
                            </div>
                        `).join('');
                        
                        log('Products displayed successfully!');
                    }
                } else {
                    log('API returned error: ' + JSON.stringify(data));
                }
            })
            .catch(error => {
                log('API Error: ' + error.message);
            });
    </script>
</body>
</html>
